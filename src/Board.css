/* Highlight for possible move cells */
.cell-highlight {
  border: 2px solid var(--color-text-light);
  box-shadow: 0 0 10px 2px var(--color-primary), inset 0 0 10px 2px var(--color-primary);
  z-index: 2;
  position: relative;
  animation: cellHighlightBorderPulse 1.5s infinite alternate;
  pointer-events: none;
}

@keyframes cellHighlightBorderPulse {
  0% { border-width: 2px; box-shadow: 0 0 5px 1px var(--color-primary), inset 0 0 5px 1px var(--color-primary); }
  100% { border-width: 4px; box-shadow: 0 0 20px 5px var(--color-primary), inset 0 0 20px 5px var(--color-primary); }
}

/* Animate movable tokens */
.token-animate {
  animation: tokenBounce 0.5s infinite alternate;
  outline: 2px solid #fff;
  outline-offset: 4px;
  box-shadow: 0 0 20px #fff;
}

@keyframes tokenBounce {
  0% { transform: scale(1) translateY(0); }
  100% { transform: scale(1.15) translateY(-8px); }
}

.board-wrap {
  width: min(80vw, 800px);
  margin: 12px auto;
  aspect-ratio: 1 / 1;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  max-width: 98vw;
}

@media (max-width: 600px) {
  .board-wrap {
    width: 98vw;
    min-width: 0;
    margin: 4px auto;
  }
  .board {
    padding: 2px;
    gap: 1px;
  }
}

.board {
  width: 98%;
  height: 98%;
  display: grid;
  grid-template-columns: repeat(15, 1fr);
  grid-template-rows: repeat(15, 1fr);
  gap: 2px;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 8px;
  padding: 6px;
  position: relative;
}

.cell {
  background: rgba(20, 25, 30, 0.6);
  border: 1px solid rgba(0, 240, 255, 0.1);
  border-radius: 4px;
  position: relative;
  box-sizing: border-box;
  transition: all 0.3s;
}

/* Home corner backgrounds */
.home.green-home { background: rgba(0, 255, 102, 0.15); border: 1px solid var(--color-success); box-shadow: inset 0 0 20px rgba(0, 255, 102, 0.2); }
.home.yellow-home { background: rgba(252, 238, 10, 0.15); border: 1px solid var(--color-secondary); box-shadow: inset 0 0 20px rgba(252, 238, 10, 0.2); }
.home.blue-home { background: rgba(0, 240, 255, 0.15); border: 1px solid var(--color-primary); box-shadow: inset 0 0 20px rgba(0, 240, 255, 0.2);  }
.home.red-home { background: rgba(255, 0, 60, 0.15); border: 1px solid var(--color-accent); box-shadow: inset 0 0 20px rgba(255, 0, 60, 0.2); }

/* PATH COLORS */
.path.yellow-path { background: var(--color-secondary); box-shadow: 0 0 10px var(--color-secondary), inset 0 0 5px rgba(0,0,0,0.5); border-color: transparent; }
.path.blue-path { background: var(--color-primary); box-shadow: 0 0 10px var(--color-primary), inset 0 0 5px rgba(0,0,0,0.5); border-color: transparent; }
.path.red-path { background: var(--color-accent); box-shadow: 0 0 10px var(--color-accent), inset 0 0 5px rgba(0,0,0,0.5); border-color: transparent; }
.path.green-path { background: var(--color-success); box-shadow: 0 0 10px var(--color-success), inset 0 0 5px rgba(0,0,0,0.5); border-color: transparent; }

/* Center block must be transparent so triangles show through */
.center-block {
  background: transparent;
  border: none;
}

/* Safe stars - Neon Reticle */
.safe-star {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 70%;
  height: 70%;
  background: rgba(255, 255, 255, 0.8);
  box-shadow: 0 0 15px #fff;
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  animation: safeStarPulse 2s infinite alternate;
}

@keyframes safeStarPulse {
  0% { transform: translate(-50%, -50%) scale(1); filter: drop-shadow(0 0 2px #fff); }
  100% { transform: translate(-50%, -50%) scale(1.1); filter: drop-shadow(0 0 10px var(--color-primary)); }
}

/* Debug labels */
.debug-label {
  display: none;
}
.debug-toggle {
  display: none;
}

/* Centered home tokens */
.home-tokens {
  position: absolute;
  width: calc((100% / 15) * 6);
  height: calc((100% / 15) * 6);
  display: flex;
  justify-content: center;
  align-items: center;
}

.home-green { left: 0; top: 0; }
.home-yellow { right: 0; top: 0; }
.home-blue { right: 0; bottom: 0; }
.home-red { left: 0; bottom: 0; }

.tokens-grid {
  width: 70%;
  height: 70%;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 8px;
  align-items: center;
  justify-items: center;
}

.tokens-container {
  position: absolute;
  top: 6px;
  left: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  display: grid;
  grid-template-columns: repeat(15, 1fr);
  grid-template-rows: repeat(15, 1fr);
  gap: 2px;
  pointer-events: none;
}

/* Ludo token SVG and hover/focus effects */
.token {
  width: 80%;
  height: 80%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  color: #fff;
  font-size: 0.8rem;
  pointer-events: auto;
  box-sizing: border-box;
  background: transparent;
  position: relative;
  transition: all 0.2s;
  outline: none;
  border: none;
}

.token svg {
  filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));
}

.token .token-label {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.8rem;
  font-weight: 900;
  font-family: 'Orbitron', sans-serif;
  pointer-events: none;
  letter-spacing: 0.05em;
  text-shadow: 0 0 3px rgba(0,0,0,0.8);
}

.token.movable:hover,
.token.movable:focus {
  z-index: 3;
  transform: scale(1.1);
}

.token-red { color: #fff; }
.token-green { color: #fff; }
.token-yellow { color: #000; }
.token-blue { color: #fff; }

.token.movable {
  cursor: pointer;
}

/* Center star */
.center-star {
  position: absolute;
  width: calc((100% / 15) * 3);
  height: calc((100% / 15) * 3);
  left: calc(50% - ((100% / 15) * 3) / 2);
  top: calc(50% - ((100% / 15) * 3) / 2);
  z-index: 5; 
  filter: drop-shadow(0 0 15px rgba(255,255,255,0.2));
}

.center-star .triangle {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.center-star .top {
  background-color: var(--color-secondary);
  clip-path: polygon(0% 0%, 100% 0%, 50% 50%);
}

.center-star .right {
  background-color: var(--color-primary);
  clip-path: polygon(100% 0%, 100% 100%, 50% 50%);
}

.center-star .bottom {
  background-color: var(--color-accent);
  clip-path: polygon(100% 100%, 0% 100%, 50% 50%);
}

.center-star .left {
  background-color: var(--color-success);
  clip-path: polygon(0% 100%, 0% 0%, 50% 50%);
}

.tokens-on-cell {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  pointer-events: none;
  padding: 1px;
  box-sizing: border-box;
}

.tokens-on-cell > .token {
  pointer-events: auto;
  position: relative;
  z-index: 10;
}

.arrow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.2rem;
  font-weight: bold;
  text-shadow: 0 0 5px currentColor;
}

.arrow.arrow-left { transform: translate(-50%, -50%) rotate(0deg); }
.arrow.arrow-up { transform: translate(-50%, -50%) rotate(90deg); }
.arrow.arrow-right { transform: translate(-50%, -50%) rotate(180deg); }
.arrow.arrow-down { transform: translate(-50%, -50%) rotate(270deg); }

/* Arrow Colors */
.arrow.blue { color: var(--color-primary); }
.arrow.red { color: var(--color-accent); }
.arrow.green { color: var(--color-success); }
.arrow.yellow { color: var(--color-secondary); }